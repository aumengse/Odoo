<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="report_training_participant_draft_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <h5 class="font-weight-bold">List of Participants</h5>
                        <div>
                            <span class="font-weight-bold">Company:</span> <span style="padding-left: 50px" t-esc="doc.partner_id.name"/> <br/>
                            <span class="font-weight-bold">Course Name:</span> <span style="padding-left: 20px" t-esc="doc.course_id.name"/> <br/>
                            <span class="font-weight-bold">Venue:</span> <span style="padding-left: 70px" t-esc="doc.venue_id.name"/> <br/>
                            <span class="font-weight-bold">Training Dates:</span> <span style="padding-left: 13px" t-esc="context_timestamp(doc.date_start).strftime('%d %b %Y')"/> to <span t-esc="context_timestamp(doc.date_end).strftime('%d %b %Y')"/> <br/>
                            <span class="font-weight-bold">Instructor:</span> <span style="padding-left: 45px" t-esc="doc.employee_id.name"/> <br/>

                        </div>

                        <!-- <link rel="stylesheet" href="/fgp_hr_attendance/static/src/css/report_employee.css"/>-->
                        <table class="table table-sm" style="margin-top:20px">
                            <thead>
                                <tr>
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">#</th>
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">Name</th>
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">Gender</th>
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">VALID LESP/ Security License</th>
                                    <th colspan="2" style="vertical-align:middle; text-align:center">
                                        In the absence, of LESP/Security License
                                    </th>
                                    <!--<th rowspan="2" style="vertical-align:middle; text-align:center">Ishihara Test</th>-->
                                     <th colspan="2" style="vertical-align:middle; text-align:center">
                                        Ishihara Test
                                    </th>
<!--                                    <th rowspan="2" style="vertical-align:middle; text-align:center">Ishihara Test</th>-->
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">COE</th>
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">Remarks</th>
                                    <th rowspan="2" style="vertical-align:middle; text-align:center">Status</th>
                                </tr>
                                <tr>
                                    <th style="vertical-align:middle; text-align:center">VALID NBI Clearance</th>
                                    <th style="vertical-align:middle; text-align:center">VALID Police Clearance</th>
                                    <th style="vertical-align:middle; text-align:center">Test</th>
                                    <th style="vertical-align:middle; text-align:center">Result</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="count" t-value="0" />

                                <tr t-foreach="records" t-as="rec">
                                    <t t-set="count" t-value="count + 1"/>
                                    <td><span t-esc="count"/></td>
                                    <td><span t-esc="rec.get('employee_id').employee_id.name"/></td>
                                    <td><span t-field="rec.get('employee_id').employee_id.gender"/></td>

                                    <td t-if="rec.get('employee_id').document_lesp_id" style="text-align:center">
                                        <i class="fa fa-check"/>
                                    </td>
                                    <td t-else=""/>

                                    <td t-if="rec.get('employee_id').document_nbi_id" style="text-align:center">
                                        <i class="fa fa-check"/>
                                    </td>
                                    <td t-else=""/>

                                    <td t-if="rec.get('employee_id').document_police_id" style="text-align:center">
                                        <i class="fa fa-check"/>
                                    </td>
                                    <td t-else=""/>

                                    <td t-if="rec.get('employee_id').document_ishihara_id" style="text-align:center">
                                        <i class="fa fa-check"/>
                                    </td>
                                    <td t-else=""/>
                                    <td style="text-align:center"><span t-field="rec.get('employee_id').ishihara_result"/></td>

                                    <td t-if="rec.get('employee_id').document_coe_id" style="text-align:center">
                                        <i class="fa fa-check"/>
                                    </td>
                                    <td t-else=""/>
                                    <td style="text-align:center"><span t-esc="rec.get('employee_id').remarks"/></td>
                                    <!--<td style="text-align:center"><span t-esc="rec.get('employee_id').state"/></td>-->
                                    <td style="text-align:center"><span t-esc="dict(rec.get('employee_id')._fields['state'].selection).get(rec.get('employee_id').state)"/></td>
                                </tr>
                            </tbody>
                        </table>
                    </t>
                </t>
            </t>
        </template>

        <template id="report_training_participant_draft">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="inside_foreach_docs" t-value="o"/>
                    <t t-call="asec_customs.report_training_participant_draft_template" t-lang="o.employee_id.sudo().address_home_id.lang"/>
                </t>
            </t>
        </template>
    </data>
</odoo>
