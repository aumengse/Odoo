<odoo>
  <data>
    <!-- explicit list view definition -->
    <record model="ir.ui.view" id="training_program_tree">
      <field name="name">training.program.tree</field>
      <field name="model">training.program</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="course_id"/>
          <field name="partner_id"/>
          <field name="employee_id"/>
          <field name="date_start"/>
          <field name="date_end"/>
          <field name="stage_id"/>
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="training_program_form">
      <field name="name">training.program.form</field>
      <field name="model">training.program</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <field name="stage_id" widget="statusbar" options="{'clickable': '1'}"/>
            <button name="action_create_invoice" string="Create Invoice" type="object" class="btn btn-primary"/>
          </header>
          <sheet>
            <div class="oe_button_box" name="button_box">
              <button class="oe_stat_button" type="action" name="%(asec_customs.action_open_training_program_documents)d"
                      icon="fa-file">
                <field string="Documents" name="document_count" widget="statinfo"/>
              </button>
            </div>
            <div class="oe_title oe_inline">
              <label for="name"/>
              <h1><field name="name" placeholder="e.g. 0001"/></h1>
            </div>
            <group>
              <group>
                <field name="course_id" options="{'no_create_edit': True}" required="1"/>
                <field name="partner_id" options="{'no_create_edit': True}" required="1" domain="[('is_company','=',True)]"/>
                <field name="venue_id" options="{'no_create_edit': True}"/>
                <field name="employee_id" options="{'no_create_edit': True}" domain="[('employee_type','=','employee')]"/>
              </group>
              <group>
                <field name="company_id" groups="base.group_multi_company" options="{'no_create_edit': True}"/>
                <field name="user_id" options="{'no_create_edit': True}" readonly="1"/>

                <label for="date_start" string="Training Dates"/>
                <div>
                  <field name="date_start" widget="daterange" options="{'related_end_date': 'date_end'}" class="oe_inline"/>
                  <span> to </span>
                  <field name="date_end" widget="daterange" options="{'related_start_date': 'date_start'}" class="oe_inline"/>
                </div>
              </group>
            </group>
            <group>
              <notebook>
                <page string="List of Participants" name="participants">
                  <field name="employee_ids" nolabel="1"
                         domain="[('employee_type','=','trainee')]"
                         context="{'default_employee_type': 'trainee'}"
                         options="{'no_create_edit': True}">
                    <tree>
                      <field name="name"/>
                      <field name="mobile_phone"/>
                      <field name="work_email"/>
                      <field name="department_id"/>
                    </tree>
                  </field>
                </page>
                <page string="Materials" name="materials">
                  <field name="material_ids" nolabel="1"
                         options="{'no_create_edit': True}">
                    <tree editable="1">
                      <field name="product_id"/>
                      <field name="quantity"/>
                      <field name="price" widget="monetary"/>
                      <field name="subtotal" sum="total"/>
                    </tree>
                  </field>
                </page>
              </notebook>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
            <field name="message_ids" widget="mail_thread"/>
            <field name="activity_ids"/>
          </div>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="training_program_kanban">
      <field name="name">training.program.kanban</field>
      <field name="model">training.program</field>
      <field name="arch" type="xml">
        <kanban default_group_by="stage_id">
          <field name="color"/>
          <field name="user_id" widget="many2one_avatar_user"/>
          <templates>
            <t t-name="kanban-box">
              <div class="o_kanban_record oe_kanban_global_click o_kanban_record_has_image_fill" color="color">
                <div class="o_kanban_record_details">
                  <div class="o_kanban_record_top" name="studio_auto_kanban_top">
                    <div class="o_kanban_record_headings" name="studio_auto_kanban_headings">
                      <strong class="o_kanban_record_title" name="studio_auto_kanban_title">
                        <field name="name"/>
                      </strong>
                    </div>
                    <div class="o_dropdown_kanban dropdown">
                      <a role="button" class="dropdown-toggle o-no-caret btn" data-toggle="dropdown" data-display="static" href="#" aria-label="Dropdown Menu" title="Dropdown Menu">
                        <span class="fa fa-ellipsis-v"/>
                      </a>
                      <div class="dropdown-menu" role="menu">
                        <a t-if="widget.editable" role="menuitem" type="edit" class="dropdown-item">Edit</a>
                        <a t-if="widget.deletable" role="menuitem" type="delete" class="dropdown-item">Delete</a>
                        <ul class="oe_kanban_colorpicker" data-field="color"/>
                      </div>
                    </div>
                  </div>
                  <div class="o_kanban_record_body" name="studio_auto_kanban_body">
                    <span class="font-weight-bold">Partner:</span> <field name="partner_id" /> <br/>
                    <span class="font-weight-bold"> Instructor: </span> <field name="employee_id" options="{'color_field': 'color'}"/> <br/>
                    <span class="font-weight-bold"> Start </span> <field name="date_start"/> <br/>
                    <span class="font-weight-bold"> End </span> <field name="date_end"/>
                  </div>
                  <div class="o_kanban_record_bottom" name="studio_auto_kanban_bottom">
                    <div class="oe_kanban_bottom_left" name="studio_auto_kanban_bottom_left">
                      <!--<field name="date_start"/> to <field name="date_end"/>-->
                    </div>
                    <div class="oe_kanban_bottom_right" name="studio_auto_kanban_bottom_right">
                      <img t-att-src="kanban_image('res.users', 'avatar_128', record.user_id.raw_value)"
                           t-att-title="record.user_id.value || unassigned"
                           t-att-alt="record.user_id.value"
                           class="oe_kanban_avatar o_image_24_cover float-right"/>
                    </div>
                  </div>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record model="ir.ui.view" id="training_program_calendar">
      <field name="name">training.program.calendar</field>
      <field name="model">training.program</field>
      <field name="arch" type="xml">
        <calendar date_start="date_start"  date_stop="date_end" string="Trainings" mode="month" color="color" event_limit="5" hide_time="true" js_class="project_calendar" event_open_popup="true" quick_add="false">
          <field name="course_id" filters="1"/>
          <!--<field name="partner_id" filters="1"/>
          <field name="employee_id" filters="1"/>-->
          <field name="partner_id" attrs="{'invisible': [('partner_id', '=', False)]}"/>
          <field name="employee_id" attrs="{'invisible': [('employee_id', '=', False)]}"/>
          <field name="employee_ids" widget="many2many_avatar_employee"/>
          <field name="stage_id"/>
        </calendar>
      </field>
    </record>


    <!-- actions opening views on models -->
    <record id="action_training_program" model="ir.actions.act_window">
      <field name="name">Training Program</field>
      <field name="res_model">training.program</field>
      <field name="view_mode">kanban,tree,form,calendar</field>
    </record>
  </data>
</odoo>